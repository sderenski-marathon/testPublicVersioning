name: Update Node Version

on:
  pull_request:
    types: [opened]

# How do I check that this hasn't reran twice now though
# Is there a check to make sure that
jobs:
  update-version:
    if: github.actor != 'github-actions[bot]' && github.event.action != 'reopened'
    runs-on: ubuntu-latest
    permissions:
      contents: write
      actions: read
      pull-requests: write
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20"
          cache: "npm"
      - name: update version
        run: |
          echo ${{ github.event.action }}
          BRANCH_NAME="${{ github.head_ref }}"
          node .github/scripts/initialVersion.js "$BRANCH_NAME"
